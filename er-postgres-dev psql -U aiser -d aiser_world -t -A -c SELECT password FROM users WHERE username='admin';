[35mpackages/chat2chart/server/README.md[m[36m:[m[32m37[m[36m:[mfastrun db revision -m "[1;31mmessage[m"
[35mpackages/chat2chart/server/alembic.ini[m[36m:[m[32m116[m[36m:[mformat = %(levelname)-5.5s [%(name)s] %([1;31mmessage[m)s
[35mpackages/chat2chart/server/app/cli/db.py[m[36m:[m[32m33[m[36m:[m@click.option("--[1;31mmessage[m", "-m", required=True)
[35mpackages/chat2chart/server/app/cli/db.py[m[36m:[m[32m34[m[36m:[mdef revision([1;31mmessage[m):
[35mpackages/chat2chart/server/app/cli/db.py[m[36m:[m[32m37[m[36m:[m        alembic_main(["--raiseerr", "revision", "--autogenerate", "-m", [1;31mmessage[m])
[35mpackages/chat2chart/server/app/core/real_data_sources.py[m[36m:[m[32m33[m[36m:[m    [1;31mmessage[m: str
[35mpackages/chat2chart/server/app/core/real_data_sources.py[m[36m:[m[32m118[m[36m:[m                    [1;31mmessage[m=f"Unsupported data source type: {data_source.type}",
[35mpackages/chat2chart/server/app/core/real_data_sources.py[m[36m:[m[32m131[m[36m:[m                [1;31mmessage[m=str(e),
[35mpackages/chat2chart/server/app/core/real_data_sources.py[m[36m:[m[32m163[m[36m:[m                    [1;31mmessage[m="PostgreSQL connection successful",
[35mpackages/chat2chart/server/app/core/real_data_sources.py[m[36m:[m[32m189[m[36m:[m                    [1;31mmessage[m="MySQL connection successful",
[35mpackages/chat2chart/server/app/core/real_data_sources.py[m[36m:[m[32m215[m[36m:[m                    [1;31mmessage[m="SQL Server connection successful",
[35mpackages/chat2chart/server/app/core/real_data_sources.py[m[36m:[m[32m223[m[36m:[m                    [1;31mmessage[m=f"Unsupported database format: {data_source.format}",
[35mpackages/chat2chart/server/app/core/real_data_sources.py[m[36m:[m[32m230[m[36m:[m                [1;31mmessage[m=f"Database connection failed: {str(e)}",
[35mpackages/chat2chart/server/app/core/real_data_sources.py[m[36m:[m[32m255[m[36m:[m                    [1;31mmessage[m="S3 connection successful",
[35mpackages/chat2chart/server/app/core/real_data_sources.py[m[36m:[m[32m274[m[36m:[m                    [1;31mmessage[m="Azure Blob connection successful",
[35mpackages/chat2chart/server/app/core/real_data_sources.py[m[36m:[m[32m291[m[36m:[m                    [1;31mmessage[m="GCS connection successful",
[35mpackages/chat2chart/server/app/core/real_data_sources.py[m[36m:[m[32m299[m[36m:[m                    [1;31mmessage[m=f"Unsupported file storage format: {data_source.format}",
[35mpackages/chat2chart/server/app/core/real_data_sources.py[m[36m:[m[32m306[m[36m:[m                [1;31mmessage[m=f"File storage connection failed: {str(e)}",
[35mpackages/chat2chart/server/app/core/real_data_sources.py[m[36m:[m[32m330[m[36m:[m                    [1;31mmessage[m="API connection successful",
[35mpackages/chat2chart/server/app/core/real_data_sources.py[m[36m:[m[32m340[m[36m:[m                    [1;31mmessage[m=f"API connection failed with status {response.status_code}",
[35mpackages/chat2chart/server/app/core/real_data_sources.py[m[36m:[m[32m347[m[36m:[m                [1;31mmessage[m=f"API connection failed: {str(e)}",
[35mpackages/chat2chart/server/app/core/real_data_sources.py[m[36m:[m[32m371[m[36m:[m                future = producer.send("test-topic", b"test [1;31mmessage[m")
[35mpackages/chat2chart/server/app/core/real_data_sources.py[m[36m:[m[32m378[m[36m:[m                    [1;31mmessage[m="Kafka connection successful",
[35mpackages/chat2chart/server/app/core/real_data_sources.py[m[36m:[m[32m401[m[36m:[m                    [1;31mmessage[m="Redis connection successful",
[35mpackages/chat2chart/server/app/core/real_data_sources.py[m[36m:[m[32m409[m[36m:[m                    [1;31mmessage[m=f"Unsupported streaming format: {data_source.format}",
[35mpackages/chat2chart/server/app/core/real_data_sources.py[m[36m:[m[32m416[m[36m:[m                [1;31mmessage[m=f"Streaming connection failed: {str(e)}",
[35mpackages/chat2chart/server/app/modules/ai/api.py[m[36m:[m[32m61[m[36m:[m    [1;31mmessage[m: str
[35mpackages/chat2chart/server/app/modules/ai/api.py[m[36m:[m[32m344[m[36m:[m                user_query=request.[1;31mmessage[m,
[35mpackages/chat2chart/server/app/modules/ai/api.py[m[36m:[m[32m353[m[36m:[m                messages=[{"role": "user", "content": request.[1;31mmessage[m}]
[35mpackages/chat2chart/server/app/modules/ai/services/ai_orchestrator.py[m[36m:[m[32m2119[m[36m:[m            # Get the last user [1;31mmessage[m
[35mpackages/chat2chart/server/app/modules/ai/services/ai_orchestrator.py[m[36m:[m[32m2127[m[36m:[m                return {"success": False, "error": "No user [1;31mmessage[m found"}
[35mpackages/chat2chart/server/app/modules/ai/services/function_calling_service.py[m[36m:[m[32m118[m[36m:[m                "[1;31mmessage[m": f"Generated {chart_type} chart using AI function calling",
[35mpackages/chat2chart/server/app/modules/ai/services/function_calling_service.py[m[36m:[m[32m398[m[36m:[m            "[1;31mmessage[m": "Generated chart using fallback mode",
[35mpackages/chat2chart/server/app/modules/ai/services/litellm_service.py[m[36m:[m[32m246[m[36m:[m            content = response.choices[0].[1;31mmessage[m.content.strip()
[35mpackages/chat2chart/server/app/modules/ai/services/litellm_service.py[m[36m:[m[32m341[m[36m:[m            content = response.choices[0].[1;31mmessage[m.content.strip()
[35mpackages/chat2chart/server/app/modules/ai/services/litellm_service.py[m[36m:[m[32m405[m[36m:[m            content = response.choices[0].[1;31mmessage[m.content.strip()
[35mpackages/chat2chart/server/app/modules/ai/services/litellm_service.py[m[36m:[m[32m641[m[36m:[m            content = response.choices[0].[1;31mmessage[m.content
[35mpackages/chat2chart/server/app/modules/ai/services/litellm_service.py[m[36m:[m[32m961[m[36m:[m                'response': response.choices[0].[1;31mmessage[m.content,
[35mpackages/chat2chart/server/app/modules/ai/services/litellm_service.py[m[36m:[m[32m1015[m[36m:[m                'response': response.choices[0].[1;31mmessage[m.content,
[35mpackages/chat2chart/server/app/modules/ai/services/litellm_service.py[m[36m:[m[32m1096[m[36m:[m            content = response.choices[0].[1;31mmessage[m.content.strip()
[35mpackages/chat2chart/server/app/modules/ai/services/litellm_service.py[m[36m:[m[32m1258[m[36m:[m        # Create context-aware system [1;31mmessage[m
[35mpackages/chat2chart/server/app/modules/ai/services/litellm_service.py[m[36m:[m[32m1261[m[36m:[m        # Insert context [1;31mmessage[m after the first system [1;31mmessage[m or at the beginning
[35mpackages/chat2chart/server/app/modules/ai/services/litellm_service.py[m[36m:[m[32m1265[m[36m:[m        for [1;31mmessage[m in messages:
[35mpackages/chat2chart/server/app/modules/ai/services/litellm_service.py[m[36m:[m[32m1266[m[36m:[m            if [1;31mmessage[m['role'] == 'system' and not system_message_added:
[35mpackages/chat2chart/server/app/modules/ai/services/litellm_service.py[m[36m:[m[32m1267[m[36m:[m                enhanced_messages.append([1;31mmessage[m)
[35mpackages/chat2chart/server/app/modules/ai/services/litellm_service.py[m[36m:[m[32m1274[m[36m:[m                enhanced_messages.append([1;31mmessage[m)
[35mpackages/chat2chart/server/app/modules/ai/services/litellm_service.py[m[36m:[m[32m1285[m[36m:[m        """Build comprehensive context [1;31mmessage[m for AI"""
[35mpackages/chat2chart/server/app/modules/charts/api.py[m[36m:[m[32m456[m[36m:[m            "[1;31mmessage[m": "Chart saved successfully",
[35mpackages/chat2chart/server/app/modules/charts/api.py[m[36m:[m[32m585[m[36m:[m            "[1;31mmessage[m": "Chart updated successfully",
[35mpackages/chat2chart/server/app/modules/charts/api.py[m[36m:[m[32m606[m[36m:[m            "[1;31mmessage[m": "Chart deleted successfully",
[35mpackages/chat2chart/server/app/modules/charts/api.py[m[36m:[m[32m628[m[36m:[m            "[1;31mmessage[m": "Chart exported successfully",
[35mpackages/chat2chart/server/app/modules/charts/api.py[m[36m:[m[32m666[m[36m:[m            "[1;31mmessage[m": "Chart imported successfully",
[35mpackages/chat2chart/server/app/modules/charts/api.py[m[36m:[m[32m689[m[36m:[m            "[1;31mmessage[m": "Chart shared successfully",
[35mpackages/chat2chart/server/app/modules/charts/api.py[m[36m:[m[32m789[m[36m:[m            "[1;31mmessage[m": "Dashboard created successfully",
[35mpackages/chat2chart/server/app/modules/charts/api.py[m[36m:[m[32m875[m[36m:[m            "[1;31mmessage[m": "Dashboard updated successfully",
[35mpackages/chat2chart/server/app/modules/charts/api.py[m[36m:[m[32m900[m[36m:[m            "[1;31mmessage[m": "Dashboard deleted successfully",
[35mpackages/chat2chart/server/app/modules/charts/api.py[m[36m:[m[32m1029[m[36m:[m            "[1;31mmessage[m": "Dashboard deleted successfully",
[35mpackages/chat2chart/server/app/modules/charts/api.py[m[36m:[m[32m1205[m[36m:[m            "[1;31mmessage[m": "Widget deleted successfully",
[35mpackages/chat2chart/server/app/modules/charts/api.py[m[36m:[m[32m1235[m[36m:[m            "[1;31mmessage[m": f"Dashboard exported successfully as {export_request.format.upper()}",
[35mpackages/chat2chart/server/app/modules/charts/api.py[m[36m:[m[32m1379[m[36m:[m            "[1;31mmessage[m": "Dashboard created from template successfully",
[35mpackages/chat2chart/server/app/modules/charts/schemas.py[m[36m:[m[32m39[m[36m:[m        description="Reference to the chat [1;31mmessage[m that generated this visualization",
[35mpackages/chat2chart/server/app/modules/charts/schemas.py[m[36m:[m[32m548[m[36m:[m    [1;31mmessage[m: str
[35mpackages/chat2chart/server/app/modules/charts/services/integrated_chat2chart_service.py[m[36m:[m[32m276[m[36m:[m                    "[1;31mmessage[m": "Schema approved and deployed successfully",
[35mpackages/chat2chart/server/app/modules/charts/services/integrated_chat2chart_service.py[m[36m:[m[32m671[m[36m:[m                    "[1;31mmessage[m": "Workflow failed, but system is operational",
[35mpackages/chat2chart/server/app/modules/charts/services/mcp_integration_service.py[m[36m:[m[32m234[m[36m:[m            "[1;31mmessage[m": "Chart generated with fallback mode. MCP ECharts server not available.",
[35mpackages/chat2chart/server/app/modules/chats/api.py[m[36m:[m[32m80[m[36m:[m            "[1;31mmessage[m": message_content,
[35mpackages/chat2chart/server/app/modules/chats/conversations/api.py[m[36m:[m[32m86[m[36m:[masync def add_message_to_conversation(conversation_id: str, [1;31mmessage[m: dict):
[35mpackages/chat2chart/server/app/modules/chats/conversations/api.py[m[36m:[m[32m87[m[36m:[m    """Add a [1;31mmessage[m to an existing conversation"""
[35mpackages/chat2chart/server/app/modules/chats/conversations/api.py[m[36m:[m[32m89[m[36m:[m        result = await service.add_message(conversation_id, [1;31mmessage[m)
[35mpackages/chat2chart/server/app/modules/chats/conversations/services.py[m[36m:[m[32m73[m[36m:[m    async def add_message(self, conversation_id: str, [1;31mmessage[m: dict):
[35mpackages/chat2chart/server/app/modules/chats/conversations/services.py[m[36m:[m[32m74[m[36m:[m        """Add a [1;31mmessage[m to a conversation"""
[35mpackages/chat2chart/server/app/modules/chats/conversations/services.py[m[36m:[m[32m89[m[36m:[m            # Create [1;31mmessage[m using the [1;31mmessage[m repository
[35mpackages/chat2chart/server/app/modules/chats/conversations/services.py[m[36m:[m[32m92[m[36m:[m                "query": [1;31mmessage[m.get("role") == "user"
[35mpackages/chat2chart/server/app/modules/chats/conversations/services.py[m[36m:[m[32m93[m[36m:[m                and [1;31mmessage[m.get("content", "")
[35mpackages/chat2chart/server/app/modules/chats/conversations/services.py[m[36m:[m[32m95[m[36m:[m                "answer": [1;31mmessage[m.get("role") == "assistant"
[35mpackages/chat2chart/server/app/modules/chats/conversations/services.py[m[36m:[m[32m96[m[36m:[m                and [1;31mmessage[m.get("content", "")
[35mpackages/chat2chart/server/app/modules/chats/conversations/services.py[m[36m:[m[32m104[m[36m:[m            if [1;31mmessage[m.get("update_conversation_metadata"):
[35mpackages/chat2chart/server/app/modules/chats/conversations/services.py[m[36m:[m[32m106[m[36m:[m                    json_metadata=[1;31mmessage[m.get("conversation_metadata")
[35mpackages/chat2chart/server/app/modules/chats/conversations/services.py[m[36m:[m[32m113[m[36m:[m            logger.error(f"Failed to add [1;31mmessage[m to conversation: {str(e)}")
[35mpackages/chat2chart/server/app/modules/chats/core/ai_flows/agents/base_agent.py[m[36m:[m[32m40[m[36m:[m            message_id: Unique [1;31mmessage[m identifier
[35mpackages/chat2chart/server/app/modules/chats/core/ai_flows/agents/base_agent.py[m[36m:[m[32m101[m[36m:[m        return response.choices[0].[1;31mmessage[m.content, response
[35mpackages/chat2chart/server/app/modules/chats/core/ai_flows/agents/title_agent.py[m[36m:[m[32m31[m[36m:[m       - Title Output: <greeting [1;31mmessage[m>
[35mpackages/chat2chart/server/app/modules/chats/enhanced_services.py[m[36m:[m[32m110[m[36m:[m            # Save [1;31mmessage[m
[35mpackages/chat2chart/server/app/modules/chats/enhanced_services.py[m[36m:[m[32m114[m[36m:[m                conversation=self.__conversation_response, [1;31mmessage[m=message_response
[35mpackages/chat2chart/server/app/modules/chats/enhanced_services.py[m[36m:[m[32m147[m[36m:[m                conversation=fallback_conversation, [1;31mmessage[m=fallback_message
[35mpackages/chat2chart/server/app/modules/chats/enhanced_services.py[m[36m:[m[32m174[m[36m:[m            # Save conversation and [1;31mmessage[m with enhanced data
[35mpackages/chat2chart/server/app/modules/chats/enhanced_services.py[m[36m:[m[32m180[m[36m:[m                [1;31mmessage[m=self.get_message_response(),
[35mpackages/chat2chart/server/app/modules/chats/enhanced_services.py[m[36m:[m[32m205[m[36m:[m            # Save conversation and [1;31mmessage[m using existing logic
[35mpackages/chat2chart/server/app/modules/chats/enhanced_services.py[m[36m:[m[32m211[m[36m:[m                [1;31mmessage[m=self.get_message_response(),
[35mpackages/chat2chart/server/app/modules/chats/enhanced_services.py[m[36m:[m[32m401[m[36m:[m        Save [1;31mmessage[m with enhanced response data
[35mpackages/chat2chart/server/app/modules/chats/enhanced_services.py[m[36m:[m[32m413[m[36m:[m            [1;31mmessage[m = await self.__message_repository.create(message_data)
[35mpackages/chat2chart/server/app/modules/chats/enhanced_services.py[m[36m:[m[32m415[m[36m:[m            if not [1;31mmessage[m:
[35mpackages/chat2chart/server/app/modules/chats/enhanced_services.py[m[36m:[m[32m416[m[36m:[m                logger.error("❌ Failed to store enhanced [1;31mmessage[m")
[35mpackages/chat2chart/server/app/modules/chats/enhanced_services.py[m[36m:[m[32m417[m[36m:[m                raise Exception("Failed to store enhanced [1;31mmessage[m")
[35mpackages/chat2chart/server/app/modules/chats/enhanced_services.py[m[36m:[m[32m422[m[36m:[m                    conversation_id=[1;31mmessage[m.conversation_id,
[35mpackages/chat2chart/server/app/modules/chats/enhanced_services.py[m[36m:[m[32m423[m[36m:[m                    query=[1;31mmessage[m.query,
[35mpackages/chat2chart/server/app/modules/chats/enhanced_services.py[m[36m:[m[32m424[m[36m:[m                    answer=[1;31mmessage[m.answer,
[35mpackages/chat2chart/server/app/modules/chats/enhanced_services.py[m[36m:[m[32m425[m[36m:[m                    error=[1;31mmessage[m.error,
[35mpackages/chat2chart/server/app/modules/chats/enhanced_services.py[m[36m:[m[32m426[m[36m:[m                    status=[1;31mmessage[m.status,
[35mpackages/chat2chart/server/app/modules/chats/enhanced_services.py[m[36m:[m[32m431[m[36m:[m            logger.error(f"❌ Failed to save enhanced [1;31mmessage[m: {str(e)}")
[35mpackages/chat2chart/server/app/modules/chats/enhanced_services.py[m[36m:[m[32m467[m[36m:[m        """Compatibility method for existing [1;31mmessage[m logic"""
[35mpackages/chat2chart/server/app/modules/chats/enhanced_services.py[m[36m:[m[32m479[m[36m:[m            [1;31mmessage[m = await self.__message_repository.create(message_data)
[35mpackages/chat2chart/server/app/modules/chats/enhanced_services.py[m[36m:[m[32m481[m[36m:[m            if not [1;31mmessage[m:
[35mpackages/chat2chart/server/app/modules/chats/enhanced_services.py[m[36m:[m[32m482[m[36m:[m                logger.error("Failed to store [1;31mmessage[m")
[35mpackages/chat2chart/server/app/modules/chats/enhanced_services.py[m[36m:[m[32m483[m[36m:[m                raise Exception("Failed to store [1;31mmessage[m")
[35mpackages/chat2chart/server/app/modules/chats/enhanced_services.py[m[36m:[m[32m488[m[36m:[m                    conversation_id=[1;31mmessage[m.conversation_id,
[35mpackages/chat2chart/server/app/modules/chats/enhanced_services.py[m[36m:[m[32m489[m[36m:[m                    query=[1;31mmessage[m.query,
[35mpackages/chat2chart/server/app/modules/chats/enhanced_services.py[m[36m:[m[32m490[m[36m:[m                    answer=[1;31mmessage[m.answer,
[35mpackages/chat2chart/server/app/modules/chats/enhanced_services.py[m[36m:[m[32m491[m[36m:[m                    error=[1;31mmessage[m.error,
[35mpackages/chat2chart/server/app/modules/chats/enhanced_services.py[m[36m:[m[32m492[m[36m:[m                    status=[1;31mmessage[m.status,
[35mpackages/chat2chart/server/app/modules/chats/enhanced_services.py[m[36m:[m[32m496[m[36m:[m            return [1;31mmessage[m
[35mpackages/chat2chart/server/app/modules/chats/enhanced_services.py[m[36m:[m[32m528[m[36m:[m    def __set_message_response(self, [1;31mmessage[m):
[35mpackages/chat2chart/server/app/modules/chats/enhanced_services.py[m[36m:[m[32m529[m[36m:[m        self.__message_response = [1;31mmessage[m
[35mpackages/chat2chart/server/app/modules/chats/enhanced_services.py[m[36m:[m[32m627[m[36m:[m        """Save [1;31mmessage[m to database"""
[35mpackages/chat2chart/server/app/modules/chats/enhanced_services.py[m[36m:[m[32m631[m[36m:[m            # Create [1;31mmessage[m in database
[35mpackages/chat2chart/server/app/modules/chats/enhanced_services.py[m[36m:[m[32m664[m[36m:[m            logger.error(f"Error saving [1;31mmessage[m: {e}")
[35mpackages/chat2chart/server/app/modules/chats/enhanced_services.py[m[36m:[m[32m711[m[36m:[m        """Check if this is a simple chat [1;31mmessage[m that doesn't need data analysis"""
[35mpackages/chat2chart/server/app/modules/chats/enhanced_services.py[m[36m:[m[32m752[m[36m:[m        return ai_result.get("[1;31mmessage[m", "I processed your request successfully.")
[35mpackages/chat2chart/server/app/modules/chats/enhanced_services.py[m[36m:[m[32m788[m[36m:[m        """Save [1;31mmessage[m to database"""
[35mpackages/chat2chart/server/app/modules/chats/enhanced_services.py[m[36m:[m[32m801[m[36m:[m            logger.error(f"Error saving [1;31mmessage[m: {e}")
[35mpackages/chat2chart/server/app/modules/chats/messages/models.py[m[36m:[m[32m8[m[36m:[m    Represents a [1;31mmessage[m in a chat conversation.
[35mpackages/chat2chart/server/app/modules/chats/messages/models.py[m[36m:[m[32m11[m[36m:[m        conversation_id (UUID): ID of the conversation this [1;31mmessage[m belongs to
[35mpackages/chat2chart/server/app/modules/chats/messages/models.py[m[36m:[m[32m14[m[36m:[m        error (String): Error [1;31mmessage[m if any
[35mpackages/chat2chart/server/app/modules/chats/messages/models.py[m[36m:[m[32m15[m[36m:[m        status (String): Current status of the [1;31mmessage[m
[35mpackages/chat2chart/server/app/modules/chats/messages/models.py[m[36m:[m[32m16[m[36m:[m        [1;31mmessage[m (JSON): Additional [1;31mmessage[m data in JSON format
[35mpackages/chat2chart/server/app/modules/chats/messages/models.py[m[36m:[m[32m19[m[36m:[m    __tablename__ = "[1;31mmessage[m"
[35mpackages/chat2chart/server/app/modules/chats/messages/repository.py[m[36m:[m[32m6[m[36m:[m[1;31mclass Message[mRepository(
[35mpackages/chat2chart/server/app/modules/chats/messages/schemas.py[m[36m:[m[32m9[m[36m:[m[1;31mclass Message[mBase(BaseModel):
[35mpackages/chat2chart/server/app/modules/chats/messages/schemas.py[m[36m:[m[32m17[m[36m:[m        default=None, description="Error [1;31mmessage[m if any occurred during processing"
[35mpackages/chat2chart/server/app/modules/chats/messages/schemas.py[m[36m:[m[32m21[m[36m:[m        description="Current status of the [1;31mmessage[m (e.g., 'pending', 'completed', 'error')",
[35mpackages/chat2chart/server/app/modules/chats/messages/schemas.py[m[36m:[m[32m24[m[36m:[m        ..., description="UUID of the conversation this [1;31mmessage[m belongs to"
[35mpackages/chat2chart/server/app/modules/chats/messages/schemas.py[m[36m:[m[32m30[m[36m:[m# Schema for creating a new [1;31mmessage[m
[35mpackages/chat2chart/server/app/modules/chats/messages/schemas.py[m[36m:[m[32m31[m[36m:[m[1;31mclass Message[mCreateSchema(MessageBase):
[35mpackages/chat2chart/server/app/modules/chats/messages/schemas.py[m[36m:[m[32m35[m[36m:[m# Schema for updating a [1;31mmessage[m
[35mpackages/chat2chart/server/app/modules/chats/messages/schemas.py[m[36m:[m[32m36[m[36m:[m[1;31mclass Message[mUpdateSchema(BaseModel):
[35mpackages/chat2chart/server/app/modules/chats/messages/schemas.py[m[36m:[m[32m39[m[36m:[m    error: Optional[str] = Field(default=None, description="Updated error [1;31mmessage[m")
[35mpackages/chat2chart/server/app/modules/chats/messages/schemas.py[m[36m:[m[32m43[m[36m:[m# Schema for reading a [1;31mmessage[m (includes id and timestamps)
[35mpackages/chat2chart/server/app/modules/chats/messages/schemas.py[m[36m:[m[32m44[m[36m:[m[1;31mclass Message[mResponseSchema(MessageBase, BaseSchema):
[35mpackages/chat2chart/server/app/modules/chats/messages/services.py[m[36m:[m[32m11[m[36m:[m[1;31mclass Message[mService(
[35mpackages/chat2chart/server/app/modules/chats/node_memory/models.py[m[36m:[m[32m14[m[36m:[m        message_id (UUID): Optional ID of the associated [1;31mmessage[m
[35mpackages/chat2chart/server/app/modules/chats/node_memory/schemas.py[m[36m:[m[32m12[m[36m:[m    message_id: Optional[str] = Field(None, description="Optional [1;31mmessage[m identifier")
[35mpackages/chat2chart/server/app/modules/chats/node_memory/schemas.py[m[36m:[m[32m38[m[36m:[m    message_id: Optional[str] = Field(None, description="Optional [1;31mmessage[m identifier")
[35mpackages/chat2chart/server/app/modules/chats/schemas.py[m[36m:[m[32m56[m[36m:[m    [1;31mmessage[m: MessageResponseSchema
[35mpackages/chat2chart/server/app/modules/chats/services.py[m[36m:[m[32m31[m[36m:[m        Process a chat interaction by managing conversation and [1;31mmessage[m storage.
[35mpackages/chat2chart/server/app/modules/chats/services.py[m[36m:[m[32m34[m[36m:[m            dict: {'conversation': ConversationSchema, '[1;31mmessage[m': MessageResponseSchema}
[35mpackages/chat2chart/server/app/modules/chats/services.py[m[36m:[m[32m37[m[36m:[m            Exception: If conversation or [1;31mmessage[m processing fails
[35mpackages/chat2chart/server/app/modules/chats/services.py[m[36m:[m[32m57[m[36m:[m            [1;31mmessage[m = self.get_message_response()
[35mpackages/chat2chart/server/app/modules/chats/services.py[m[36m:[m[32m59[m[36m:[m            return ChatResponseSchema(conversation=conversation, [1;31mmessage[m=[1;31mmessage[m)
[35mpackages/chat2chart/server/app/modules/chats/services.py[m[36m:[m[32m107[m[36m:[m            [1;31mmessage[m = await self.__message_repository.create(messageData)
[35mpackages/chat2chart/server/app/modules/chats/services.py[m[36m:[m[32m109[m[36m:[m            if not [1;31mmessage[m:
[35mpackages/chat2chart/server/app/modules/chats/services.py[m[36m:[m[32m110[m[36m:[m                logger.error("Failed to store [1;31mmessage[m")
[35mpackages/chat2chart/server/app/modules/chats/services.py[m[36m:[m[32m111[m[36m:[m                raise Exception("Failed to store [1;31mmessage[m")
[35mpackages/chat2chart/server/app/modules/chats/services.py[m[36m:[m[32m116[m[36m:[m                    conversation_id=[1;31mmessage[m.conversation_id,
[35mpackages/chat2chart/server/app/modules/chats/services.py[m[36m:[m[32m117[m[36m:[m                    query=[1;31mmessage[m.query,
[35mpackages/chat2chart/server/app/modules/chats/services.py[m[36m:[m[32m118[m[36m:[m                    answer=[1;31mmessage[m.answer,
[35mpackages/chat2chart/server/app/modules/chats/services.py[m[36m:[m[32m119[m[36m:[m                    error=[1;31mmessage[m.error,
[35mpackages/chat2chart/server/app/modules/chats/services.py[m[36m:[m[32m120[m[36m:[m                    status=[1;31mmessage[m.status,
[35mpackages/chat2chart/server/app/modules/chats/services.py[m[36m:[m[32m124[m[36m:[m            return [1;31mmessage[m
[35mpackages/chat2chart/server/app/modules/chats/services.py[m[36m:[m[32m156[m[36m:[m    def __set_message_response(self, [1;31mmessage[m):
[35mpackages/chat2chart/server/app/modules/chats/services.py[m[36m:[m[32m157[m[36m:[m        self.__message_response = [1;31mmessage[m
[35mpackages/chat2chart/server/app/modules/chats/simple_chat_service.py[m[36m:[m[32m82[m[36m:[m            # Create [1;31mmessage[m
[35mpackages/chat2chart/server/app/modules/chats/simple_chat_service.py[m[36m:[m[32m97[m[36m:[m                [1;31mmessage[m = await self.message_repository.create(message_data)
[35mpackages/chat2chart/server/app/modules/chats/simple_chat_service.py[m[36m:[m[32m99[m[36m:[m                logger.warning(f"Could not save [1;31mmessage[m: {e}")
[35mpackages/chat2chart/server/app/modules/chats/simple_chat_service.py[m[36m:[m[32m100[m[36m:[m                [1;31mmessage[m = MessageResponseSchema(**message_data)
[35mpackages/chat2chart/server/app/modules/chats/simple_chat_service.py[m[36m:[m[32m103[m[36m:[m                conversation=conversation_for_response, [1;31mmessage[m=[1;31mmessage[m
[35mpackages/chat2chart/server/app/modules/chats/simple_chat_service.py[m[36m:[m[32m128[m[36m:[m                conversation=fallback_conversation, [1;31mmessage[m=fallback_message
[35mpackages/chat2chart/server/app/modules/chats/streaming_service.py[m[36m:[m[32m245[m[36m:[m            if ai_result.get("[1;31mmessage[m") and "function calling" in ai_result["[1;31mmessage[m"]:
[35mpackages/chat2chart/server/app/modules/cube/api.py[m[36m:[m[32m553[m[36m:[m            "[1;31mmessage[m": "Cache warmed successfully",
[35mpackages/chat2chart/server/app/modules/cube/api.py[m[36m:[m[32m571[m[36m:[m            "[1;31mmessage[m": "Cache cleared successfully",
[35mpackages/chat2chart/server/app/modules/data/api.py[m[36m:[m[32m57[m[36m:[m    [1;31mmessage[m: str
[35mpackages/chat2chart/server/app/modules/data/api.py[m[36m:[m[32m116[m[36m:[m                [1;31mmessage[m="Database connection successful",
[35mpackages/chat2chart/server/app/modules/data/api.py[m[36m:[m[32m122[m[36m:[m                [1;31mmessage[m="Database connection failed",
[35mpackages/chat2chart/server/app/modules/data/api.py[m[36m:[m[32m129[m[36m:[m            success=False, [1;31mmessage[m="Database connection test failed", error=str(e)
[35mpackages/chat2chart/server/app/modules/data/api.py[m[36m:[m[32m171[m[36m:[m            "[1;31mmessage[m": "Database connected successfully",
[35mpackages/chat2chart/server/app/modules/data/api.py[m[36m:[m[32m391[m[36m:[m                "[1;31mmessage[m": f"File uploaded successfully: {result['data_source']['row_count']} rows processed",
[35mpackages/chat2chart/server/app/modules/data/api.py[m[36m:[m[32m443[m[36m:[m                        "[1;31mmessage[m": "Database connection created successfully",
[35mpackages/chat2chart/server/app/modules/data/api.py[m[36m:[m[32m448[m[36m:[m                        detail=f"Database connection failed: {test_result.[1;31mmessage[m}",
[35mpackages/chat2chart/server/app/modules/data/api.py[m[36m:[m[32m548[m[36m:[m            return {"success": True, "[1;31mmessage[m": result["[1;31mmessage[m"]}
[35mpackages/chat2chart/server/app/modules/data/api.py[m[36m:[m[32m1033[m[36m:[m            "[1;31mmessage[m": "Warehouse connection test completed",
[35mpackages/chat2chart/server/app/modules/data/api.py[m[36m:[m[32m1144[m[36m:[m                "[1;31mmessage[m": "Cube.js schema deployed successfully",
[35mpackages/chat2chart/server/app/modules/data/api.py[m[36m:[m[32m1380[m[36m:[m        return {"success": True, "[1;31mmessage[m": "Materialized view created"}
[35mpackages/chat2chart/server/app/modules/data/api.py[m[36m:[m[32m1405[m[36m:[m        return {"success": True, "[1;31mmessage[m": "Materialized view refreshed"}
[35mpackages/chat2chart/server/app/modules/data/api.py[m[36m:[m[32m1430[m[36m:[m        return {"success": True, "[1;31mmessage[m": "Materialized view dropped"}
[35mpackages/chat2chart/server/app/modules/data/schemas.py[m[36m:[m[32m56[m[36m:[m    [1;31mmessage[m: Optional[str] = None
[35mpackages/chat2chart/server/app/modules/data/schemas.py[m[36m:[m[32m74[m[36m:[m    [1;31mmessage[m: Optional[str] = None
[35mpackages/chat2chart/server/app/modules/data/schemas.py[m[36m:[m[32m169[m[36m:[m    [1;31mmessage[m: Optional[str] = None
[35mpackages/chat2chart/server/app/modules/data/services/cloud_storage_service.py[m[36m:[m[32m322[m[36m:[m                return {"success": True, "[1;31mmessage[m": "Cloud storage not enabled"}
[35mpackages/chat2chart/server/app/modules/data/services/cloud_storage_service.py[m[36m:[m[32m334[m[36m:[m                    "[1;31mmessage[m": "No cleanup needed for local storage",
[35mpackages/chat2chart/server/app/modules/data/services/cube_connector_service.py[m[36m:[m[32m323[m[36m:[m                "[1;31mmessage[m": "Connection test successful",
[35mpackages/chat2chart/server/app/modules/data/services/cube_integration_service.py[m[36m:[m[32m81[m[36m:[m                    "[1;31mmessage[m": "Cube.js connection established successfully",
[35mpackages/chat2chart/server/app/modules/data/services/cube_integration_service.py[m[36m:[m[32m438[m[36m:[m                    "[1;31mmessage[m": "Cube.js schema deployed successfully",
[35mpackages/chat2chart/server/app/modules/data/services/cube_integration_service.py[m[36m:[m[32m474[m[36m:[m                    "[1;31mmessage[m": f"Schema deployed with {len(deployed_cubes)} cubes",
[35mpackages/chat2chart/server/app/modules/data/services/cube_integration_service.py[m[36m:[m[32m540[m[36m:[m            return {"success": True, "[1;31mmessage[m": "Schemas reloaded successfully"}
[35mpackages/chat2chart/server/app/modules/data/services/cube_integration_service.py[m[36m:[m[32m594[m[36m:[m                            "[1;31mmessage[m": "Schema test query successful",
[35mpackages/chat2chart/server/app/modules/data/services/cube_integration_service.py[m[36m:[m[32m666[m[36m:[m                            "[1;31mmessage[m": "Schema deployed to Cube.js successfully",
[35mpackages/chat2chart/server/app/modules/data/services/data_connectivity_service.py[m[36m:[m[32m1349[m[36m:[m            return {"success": True, "[1;31mmessage[m": "Data source deleted successfully"}
[35mpackages/chat2chart/server/app/modules/data/services/data_connectivity_service.py[m[36m:[m[32m2320[m[36m:[m                    "[1;31mmessage[m": "Data source created successfully",
[35mpackages/chat2chart/server/app/modules/data/services/data_sources_crud.py[m[36m:[m[32m445[m[36m:[m                "[1;31mmessage[m": test_result.[1;31mmessage[m,
[35mpackages/chat2chart/server/app/modules/data/services/enterprise_connectors_service.py[m[36m:[m[32m123[m[36m:[m                    "[1;31mmessage[m": f"Connection to {config.name} successful",
[35mpackages/chat2chart/server/app/modules/data/services/enterprise_connectors_service.py[m[36m:[m[32m176[m[36m:[m                    "[1;31mmessage[m": f"Connection to {config.name} created successfully",
[35mpackages/chat2chart/server/app/modules/data/services/enterprise_connectors_service.py[m[36m:[m[32m309[m[36m:[m                    "[1;31mmessage[m": "Snowflake connection test successful",
[35mpackages/chat2chart/server/app/modules/data/services/enterprise_connectors_service.py[m[36m:[m[32m319[m[36m:[m                "[1;31mmessage[m": "Snowflake connection established",
[35mpackages/chat2chart/server/app/modules/data/services/enterprise_connectors_service.py[m[36m:[m[32m437[m[36m:[m                    "[1;31mmessage[m": "BigQuery connection test successful",
[35mpackages/chat2chart/server/app/modules/data/services/enterprise_connectors_service.py[m[36m:[m[32m443[m[36m:[m                "[1;31mmessage[m": "BigQuery connection established",
[35mpackages/chat2chart/server/app/modules/data/services/enterprise_connectors_service.py[m[36m:[m[32m559[m[36m:[m                    "[1;31mmessage[m": "Redshift connection test successful",
[35mpackages/chat2chart/server/app/modules/data/services/enterprise_connectors_service.py[m[36m:[m[32m565[m[36m:[m                "[1;31mmessage[m": "Redshift connection established",
[35mpackages/chat2chart/server/app/modules/data/services/enterprise_connectors_service.py[m[36m:[m[32m678[m[36m:[m                    "[1;31mmessage[m": "Databricks connection test successful",
[35mpackages/chat2chart/server/app/modules/data/services/enterprise_connectors_service.py[m[36m:[m[32m684[m[36m:[m                "[1;31mmessage[m": "Databricks connection established",
[35mpackages/chat2chart/server/app/modules/data/services/enterprise_connectors_service.py[m[36m:[m[32m812[m[36m:[m                                "[1;31mmessage[m": "REST API connection test successful",
[35mpackages/chat2chart/server/app/modules/data/services/enterprise_connectors_service.py[m[36m:[m[32m823[m[36m:[m                "[1;31mmessage[m": "REST API connection established",
[35mpackages/chat2chart/server/app/modules/data/services/enterprise_connectors_service.py[m[36m:[m[32m1067[m[36m:[m                    "[1;31mmessage[m": f"Connection {connection_id} deleted successfully",
[35mpackages/chat2chart/server/app/modules/data/services/intelligent_data_modeling_service.py[m[36m:[m[32m395[m[36m:[m                "[1;31mmessage[m": "Thank you for your feedback! The system has learned from your input.",
[35mpackages/chat2chart/server/app/modules/data/services/multi_engine_query_service.py[m[36m:[m[32m522[m[36m:[m                "[1;31mmessage[m": "Direct SQL execution simulated",
[35mpackages/chat2chart/server/app/modules/data/services/real_cube_integration_service.py[m[36m:[m[32m100[m[36m:[m                    "[1;31mmessage[m": "Cube.js server is already running",
[35mpackages/chat2chart/server/app/modules/data/services/real_cube_integration_service.py[m[36m:[m[32m121[m[36m:[m                        "[1;31mmessage[m": "Cube.js server initialized successfully",
[35mpackages/chat2chart/server/app/modules/data/services/real_cube_integration_service.py[m[36m:[m[32m192[m[36m:[m                "[1;31mmessage[m": f"Real {db_type} connection established",
[35mpackages/chat2chart/server/app/modules/data/services/real_cube_integration_service.py[m[36m:[m[32m416[m[36m:[m                    "[1;31mmessage[m": "Cube.js schema created and deployed successfully",
[35mpackages/chat2chart/server/app/modules/data/services/real_cube_integration_service.py[m[36m:[m[32m482[m[36m:[m                "[1;31mmessage[m": f"Direct {db_type} connection test successful",
[35mpackages/chat2chart/server/app/modules/data/services/real_cube_integration_service.py[m[36m:[m[32m561[m[36m:[m                        "[1;31mmessage[m": "SQLAlchemy engine test successful",
[35mpackages/chat2chart/server/app/modules/data/services/real_cube_integration_service.py[m[36m:[m[32m615[m[36m:[m                "[1;31mmessage[m": "Data source configuration deployed to Cube.js",
[35mpackages/chat2chart/server/app/modules/data/services/real_cube_integration_service.py[m[36m:[m[32m876[m[36m:[m                "[1;31mmessage[m": "Schema deployed to Cube.js server",
[35mpackages/chat2chart/server/app/modules/data/services/real_cube_integration_service.py[m[36m:[m[32m911[m[36m:[m                            "[1;31mmessage[m": "Schema test successful",
[35mpackages/chat2chart/server/app/modules/data/services/real_cube_integration_service.py[m[36m:[m[32m951[m[36m:[m            return {"success": True, "[1;31mmessage[m": "Cube.js server started successfully"}
[35mpackages/chat2chart/server/app/modules/data/services/real_cube_integration_service.py[m[36m:[m[32m975[m[36m:[m                            "[1;31mmessage[m": "Cube.js server connection test successful",
[35mpackages/chat2chart/server/app/modules/data/services/yaml_schema_service.py[m[36m:[m[32m92[m[36m:[m                "[1;31mmessage[m": "YAML schema generated successfully. Please review and verify the schema.",
[35mpackages/chat2chart/server/app/modules/data/services/yaml_schema_service.py[m[36m:[m[32m172[m[36m:[m                "[1;31mmessage[m": "YAML schema is valid",
[35mpackages/chat2chart/server/app/modules/data/services/yaml_schema_service.py[m[36m:[m[32m266[m[36m:[m                "[1;31mmessage[m": "Schema updated successfully based on user verification",
[35mpackages/chat2chart/server/app/modules/data/services/yaml_schema_service.py[m[36m:[m[32m727[m[36m:[m                        "[1;31mmessage[m": "No primary key identified. Consider adding a primary key column.",
[35mpackages/chat2chart/server/app/modules/data/services/yaml_schema_service.py[m[36m:[m[32m741[m[36m:[m                        "[1;31mmessage[m": "No time dimension columns found. Consider adding date/time columns for time-based analysis.",
[35mpackages/chat2chart/server/app/modules/data/services/yaml_schema_service.py[m[36m:[m[32m753[m[36m:[m                        "[1;31mmessage[m": "No numeric columns found for measures. Consider adding numeric columns for aggregations.",
[35mpackages/chat2chart/server/app/modules/files/api.py[m[36m:[m[32m21[m[36m:[m    return UploadResponse([1;31mmessage[m="File uploaded successfully", file=file_info)
[35mpackages/chat2chart/server/app/modules/files/api.py[m[36m:[m[32m50[m[36m:[m    return {"[1;31mmessage[m": "File deleted successfully"}
[35mpackages/chat2chart/server/app/modules/files/schemas.py[m[36m:[m[32m35[m[36m:[m    [1;31mmessage[m: str
[35mpackages/chat2chart/server/app/modules/files/services/local.py[m[36m:[m[32m74[m[36m:[m        return {"[1;31mmessage[m": "File deleted successfully"}
[35mpackages/chat2chart/server/app/modules/onboarding/api.py[m[36m:[m[32m29[m[36m:[m    [1;31mmessage[m: str
[35mpackages/chat2chart/server/app/modules/onboarding/api.py[m[36m:[m[32m121[m[36m:[m            [1;31mmessage[m="Onboarding completed successfully",
[35mpackages/chat2chart/server/app/modules/organization/api.py[m[36m:[m[32m219[m[36m:[m        return {"success": True, "[1;31mmessage[m": "Invitation sent successfully"}
[35mpackages/chat2chart/server/app/modules/projects/api.py[m[36m:[m[32m171[m[36m:[m        return {"success": True, "[1;31mmessage[m": "Project deleted"}
[35mpackages/chat2chart/server/app/modules/projects/api.py[m[36m:[m[32m224[m[36m:[m        return {"success": result, "[1;31mmessage[m": "Data source removed from project"}
[35mpackages/chat2chart/server/app/modules/projects/api.py[m[36m:[m[32m305[m[36m:[m        return {"success": True, "[1;31mmessage[m": "Member added successfully"}
[35mpackages/chat2chart/server/app/modules/projects/api.py[m[36m:[m[32m319[m[36m:[m        return {"success": True, "[1;31mmessage[m": "Member updated successfully"}
[35mpackages/chat2chart/server/app/modules/projects/api.py[m[36m:[m[32m331[m[36m:[m        return {"success": True, "[1;31mmessage[m": "Member removed successfully"}
[35mpackages/chat2chart/server/app/modules/teams/services/teams_crud.py[m[36m:[m[32m61[m[36m:[m    [1;31mmessage[m: Optional[str] = None
[35mpackages/chat2chart/server/app/modules/teams/services/teams_crud.py[m[36m:[m[32m71[m[36m:[m    [1;31mmessage[m: Optional[str]
[35mpackages/chat2chart/server/app/modules/teams/services/teams_crud.py[m[36m:[m[32m463[m[36m:[m                [1;31mmessage[m=invite_data.[1;31mmessage[m,
[35mpackages/chat2chart/server/app/modules/user/api.py[m[36m:[m[32m84[m[36m:[m        return {"[1;31mmessage[m": "User deleted successfully"}
[35mpackages/chat2chart/server/app/modules/user/api.py[m[36m:[m[32m164[m[36m:[m        return {"success": True, "[1;31mmessage[m": "Security settings updated successfully"}
[35mpackages/chat2chart/server/app/modules/user/api.py[m[36m:[m[32m202[m[36m:[m            "[1;31mmessage[m": "Notification settings updated successfully",
[35mpackages/chat2chart/server/app/modules/user/api.py[m[36m:[m[32m240[m[36m:[m        return {"success": True, "[1;31mmessage[m": "Appearance settings updated successfully"}
[35mpackages/chat2chart/server/app/modules/user/api.py[m[36m:[m[32m282[m[36m:[m            "[1;31mmessage[m": "API key created successfully",
[35mpackages/chat2chart/server/app/modules/user/api.py[m[36m:[m[32m296[m[36m:[m        return {"success": True, "[1;31mmessage[m": "API key deleted successfully"}
[35mpackages/chat2chart/server/migrations/script.py.mako[m[36m:[m[32m1[m[36m:[m"""${[1;31mmessage[m}
[35mpackages/chat2chart/server/migrations/versions/20250120_114929_17377fdb9b19_chat_models.py[m[36m:[m[32m58[m[36m:[m        "[1;31mmessage[m",
[35mpackages/chat2chart/server/migrations/versions/20250120_114929_17377fdb9b19_chat_models.py[m[36m:[m[32m76[m[36m:[m    op.create_index(op.f("ix_message_id"), "[1;31mmessage[m", ["id"], unique=True)
[35mpackages/chat2chart/server/migrations/versions/20250120_114929_17377fdb9b19_chat_models.py[m[36m:[m[32m82[m[36m:[m    op.drop_index(op.f("ix_message_id"), table_name="[1;31mmessage[m")
[35mpackages/chat2chart/server/migrations/versions/20250120_114929_17377fdb9b19_chat_models.py[m[36m:[m[32m83[m[36m:[m    op.drop_table("[1;31mmessage[m")
